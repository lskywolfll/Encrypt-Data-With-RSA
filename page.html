<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Test Encrypt Data</title>
</head>

<body>
    test
    <script src="js/jsencrypt.min.js"></script>
    <script>
        // Encripted Data
        const valor_públic_key = ` -----BEGIN PUBLIC KEY-----
MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDHz8NVuztXCwpdMl80xaXQei+k
nUduRLXufCuxQSikQfhWRUmW9UgwAc3NNYV8qsM2HmcKSgCsmmUALu+ifsYzBvEj
Wo1wjahcbbW8s260JVTLgi5qZbLjSV1EIhBoclLnkk1WivUWGaPprvgKuS5aP8Gj
YuBgLO1eLEJg/w3h3QIDAQAB
-----END PUBLIC KEY-----`;
        var encrypt = new JSEncrypt();
        encrypt.setPublicKey(valor_públic_key);
        var encrypted = encrypt.encrypt('TestString');
        console.log(encrypted);

//         // Test descencrypted Data
//         const valor_private_key = ` -----BEGIN RSA PRIVATE KEY-----
// MIICXAIBAAKBgQDHz8NVuztXCwpdMl80xaXQei+knUduRLXufCuxQSikQfhWRUmW
// 9UgwAc3NNYV8qsM2HmcKSgCsmmUALu+ifsYzBvEjWo1wjahcbbW8s260JVTLgi5q
// ZbLjSV1EIhBoclLnkk1WivUWGaPprvgKuS5aP8GjYuBgLO1eLEJg/w3h3QIDAQAB
// AoGAd43Ttb9CoTFE8UCLgLrmHNiPGzLUI6FPLjPzvKpdE/M5EP2CK6X1nGvn5Ooq
// Rc6y4PXN93UR9DSpTDPJRHQQSDXQXrQWBF3un/Y8ClBr4fhr8cfT/DXPaoyStTY+
// JPoqc/bifocDxB3lpaueGve1+kbDa8ofm0H2ZAngAkQPcMECQQD6G0L3GKddRKyi
// l/h/2u/QOO0UAUCro/F/agIOrAT8U3o2HHSg3aswqQiaWTc2uQwB9EJJgNy2H0Ti
// YZMGqCzNAkEAzIUaarlj8I3me69E1BWWzRN/ghv62Ou4nowkh0ALEFB7ySkpxQwS
// AFjLM7XZJRULM9XWKDqwyz1h99JgM1aJUQJAXbszyIj7yC+Bh1nu7nOtplp/Nx0V
// EH5bdkXTSY5cO/hI99iIOPV6P71JlRbUY3TMNDtHUGaz0Kk9Vp38zOTgDQJAQ9GP
// ZPx863PijfkctcdC7lYc3iQxFmV0Hv8Rzdeq04ocwiPoOfM6tOq81zTiAK3tvQ6X
// qVds8Lg2GFumkt+LQQJBAPNRtm7w2D/THqXfZ0L/VBlITJfE285llCHZjwlHPjFL
// xlpm33izvdO66tW8atmMxLUyNzReChyRjoPEamIAflY=
// -----END RSA PRIVATE KEY-----`

//         encrypt.setPrivateKey(valor_private_key);
//         var decrypted = encrypt.decrypt(encrypted);
//         console.log(decrypted);

        // Test with send data to backend rest-api

        // Example POST method implementation:
        const urlBackend = 'http://localhost:3000'
        async function postData(url = '', data = {}) {
            // Default options are marked with *
            const response = await fetch(`${urlBackend}${url}`, {
                method: 'POST', // *GET, POST, PUT, DELETE, etc.
                mode: 'cors', // no-cors, *cors, same-origin
                cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached
                credentials: 'same-origin', // include, *same-origin, omit
                headers: {
                    'Content-Type': 'application/json'
                    // 'Content-Type': 'application/x-www-form-urlencoded',
                },
                referrerPolicy: 'no-referrer', // no-referrer, *client
                body: JSON.stringify(data) // body data type must match "Content-Type" header
            });
            return await response.json(); // parses JSON response into native JavaScript objects
        }

        postData('/Verificar', {data: encrypted})
            .then(resp => {
                console.log(resp);
            })
            .catch(err => {
                console.log(err);
            });
    </script>
</body>

</html>